import{_ as De}from"./assets/preload-helper.1c052cf7.js";(()=>{var F=Object.defineProperty,G=(t,e,r)=>e in t?F(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,H=(t,e,r)=>(G(t,typeof e!="symbol"?e+"":e,r),r),b="fs-attributes",J="cmsattribute",Q="cmscore",A="cmsnest",C="support",X=async(...t)=>{var e;let r=[];for(let n of t){let a=await((e=window.fsAttributes[n])==null?void 0:e.loading);r.push(a)}return r},M=class{static activateAlerts(){this.alertsActivated=!0}static alert(t,e){if(this.alertsActivated&&window.alert(t),e==="error")throw new Error(t)}};H(M,"alertsActivated",!1);var Y=()=>{},Z=(t,e)=>!!t&&e.includes(t),E=t=>typeof t=="string",ee={wrapper:"w-dyn-list",list:"w-dyn-items",item:"w-dyn-item",paginationWrapper:"w-pagination-wrapper",paginationNext:"w-pagination-next",paginationPrevious:"w-pagination-previous",pageCount:"w-page-count",emptyState:"w-dyn-empty"},T=(t,e=!0)=>t.cloneNode(e);function te(t,e,r,n=!0){let a=r?[r]:[];if(!t)return a;let i=t.split(",").reduce((l,s)=>{let u=s.trim();return(!n||u)&&l.push(u),l},[]);if(e){let l=i.filter(s=>Z(s,e));return l.length?l:a}return i}var re=(t=document)=>{var e;let r="Last Published:";for(let n of t.childNodes)if(n.nodeType===Node.COMMENT_NODE&&(e=n.textContent)!=null&&e.includes(r)){let a=n.textContent.trim().split(r)[1];if(a)return new Date(a)}},_=(t=document)=>t.documentElement.getAttribute("data-wf-site");function ne(t,e,r){var n;let a=window.fsAttributes[t];return a.destroy=r||Y,(n=a.resolve)==null||n.call(a,e),e}var j=(t,e="1",r="iife")=>{let n=`${t}${r==="esm"?".esm":""}.js`;return`https://cdn.jsdelivr.net/npm/@finsweet/attributes-${t}@${e}/${n}`},ae=j(Q,"1"),ie=async()=>{let{fsAttributes:t}=window;t.cmscore||(t.cmscore={});let{cmscore:e}=t;if(e.import)return e.import;try{return e.import=De(()=>import(ae),[]),e.import.then(r=>{r&&(e.version||(e.version=r.version))}),e.import}catch(r){M.alert(`${r}`,"error");return}},le=`${b}-${C}`,se=async()=>{var t;let{fsAttributes:e,location:r}=window,{host:n,searchParams:a}=new URL(r.href);return!n.includes("webflow.io")||!a.has(le)?!1:(t=e.import)==null?void 0:t.call(e,C,"1")},O=t=>{let e=(n,a,i)=>{let l=t[n],{key:s,values:u}=l,o;if(!a)return`[${s}]`;let p=u==null?void 0:u[a];E(p)?o=p:o=p(i&&"instanceIndex"in i?i.instanceIndex:void 0);let c=i&&"caseInsensitive"in i&&i.caseInsensitive?"i":"";if(!(i!=null&&i.operator))return`[${s}="${o}"${c}]`;switch(i.operator){case"prefixed":return`[${s}^="${o}"${c}]`;case"suffixed":return`[${s}$="${o}"${c}]`;case"contains":return`[${s}*="${o}"${c}]`}};function r(n,a){let i=e("element",n,a),l=(a==null?void 0:a.scope)||document;return a!=null&&a.all?[...l.querySelectorAll(i)]:l.querySelector(i)}return[e,r,(n,a)=>{let i=t[a];return i?n.getAttribute(i.key):null}]},S={preventLoad:{key:`${b}-preventload`},debugMode:{key:`${b}-debug`},src:{key:"src",values:{finsweet:"@finsweet/attributes"}},dev:{key:`${b}-dev`}},[D,We]=O(S),oe=t=>{let{currentScript:e}=document,r={};if(!e)return{attributes:r,preventsLoad:!1};let n={preventsLoad:E(e.getAttribute(S.preventLoad.key)),attributes:r};for(let a in t){let i=e.getAttribute(t[a]);n.attributes[a]=i}return n},ue=({scriptAttributes:t,attributeKey:e,version:r,init:n})=>{var a;ce(),(a=window.fsAttributes)[e]||(a[e]={});let{preventsLoad:i,attributes:l}=oe(t),s=window.fsAttributes[e];s.version=r,s.init=n,i||(window.Webflow||(window.Webflow=[]),window.Webflow.push(()=>n(l)))},ce=()=>{let t=de();if(window.fsAttributes&&!Array.isArray(window.fsAttributes)){P(window.fsAttributes,t);return}let e=pe(t);P(e,t),me(e),window.fsAttributes=e,window.FsAttributes=window.fsAttributes,se()},pe=t=>{let e={cms:{},push(...r){var n,a;for(let[i,l]of r)(a=(n=this[i])==null?void 0:n.loading)==null||a.then(l)},async import(r,n){return e[r]||new Promise(i=>{let l=document.createElement("script");l.src=j(r,n),l.async=!0,l.onload=()=>{let[s]=P(e,[r]);i(s)},document.head.append(l)})},destroy(){var r,n;for(let a of t)(n=(r=window.fsAttributes[a])==null?void 0:r.destroy)==null||n.call(r)}};return e},de=()=>{let t=D("src","finsweet",{operator:"contains"}),e=D("dev");return[...document.querySelectorAll(`script${t}, script${e}`)].reduce((r,n)=>{var a;let i=n.getAttribute(S.dev.key)||((a=n.src.match(/[\w-. ]+(?=(\.js)$)/))==null?void 0:a[0]);return i&&!r.includes(i)&&r.push(i),r},[])},P=(t,e)=>e.map(r=>{let n=t[r];return n||(t[r]={},n=t[r],n.loading=new Promise(a=>{n.resolve=i=>{a(i),delete n.resolve}}),n)}),me=t=>{let e=Array.isArray(window.fsAttributes)?window.fsAttributes:[];t.push(...e)},fe="1.12.0",we="fs-cms-element",ve={wrapper:"wrapper",list:"list",item:"item",paginationWrapper:"pagination-wrapper",paginationNext:"pagination-next",paginationPrevious:"pagination-previous",pageCount:"page-count",emptyState:"empty"},f=t=>{let e=`.${ee[t]}`,r=`[${we}="${ve[t]}"]`;return`:is(${e}, ${r})`},ye=(t,e=document)=>{t=t.filter(n=>n);let r=t.join(", ")||f("wrapper");return[...e.querySelectorAll(r)].reduce((n,a)=>{if(!a)return n;let i=x(a,"wrapper");return!i||n.includes(i)||n.push(i),n},[])};function x(t,e,r=document){let n=typeof t=="string"?r.querySelector(t):t;if(!n)return;let a=n.closest(f("wrapper"));if(!a)return;let i=a.querySelector(f("list"));return e==="wrapper"?a:e==="list"?i:e==="items"?[...(i==null?void 0:i.querySelectorAll(`:scope > ${f("item")}`))||[]]:e==="pageCount"?a.querySelector(f("pageCount")):e==="empty"?a.querySelector(`:scope > ${f("emptyState")}`):e==="pagination"?a.querySelector(f("paginationWrapper")):a.querySelector(f(e==="next"?"paginationNext":"paginationPrevious"))}var w="pages",I=new Map,ge=async(t,{cache:e=!0,cacheExternal:r,cacheKey:n,cacheVersion:a}={})=>{var i,l;try{let s=new URL(t,window.location.origin),u=await he(s);if(u)return u;let o=_(),p=re(),c=o||n,d=(l=(i=p==null?void 0:p.getTime())!=null?i:a)!=null?l:1,m=c?await be(c,d):null;if(!e||!m){let{page:g}=await W(s);return g}let h=await $e(m,s.href);if(h){let g=k(h);return r&&!U(g,o)&&R(m,s,o,r),g}return await R(m,s,o,r)}catch{return null}},he=async t=>{let e=await I.get(t.href);if(e)return k(e)},W=async t=>{let e=fetch(t.href).then(n=>n.text());I.set(t.href,e);let r=await e;return{page:k(r),rawPage:r}},R=async(t,e,r,n)=>{let{page:a,rawPage:i}=await W(e),l=U(a,r);return!l&&!n||(await Ae(t,e.href,i),l&&I.delete(e.href)),a},U=(t,e)=>{if(!e)return!1;let r=_(t);return r&&r===e},k=t=>new DOMParser().parseFromString(t,"text/html"),be=(t,e)=>new Promise(r=>{try{let n=window.indexedDB.open(t,e);n.onblocked=()=>{r(null)},n.onupgradeneeded=()=>{let a=n.result;a.objectStoreNames.contains(w)&&a.deleteObjectStore(w),a.createObjectStore(w)},n.onerror=()=>r(null),n.onsuccess=()=>{let a=n.result;a.onversionchange=()=>a.close(),r(a)}}catch{r(null)}}),$e=async(t,e)=>new Promise(r=>{let n=t.transaction(w).objectStore(w).get(e);n.onerror=()=>r(null),n.onsuccess=()=>r(n.result)}),Ae=async(t,e,r)=>new Promise(n=>{let a=t.transaction(w,"readwrite").objectStore(w).put(r,e);a.onerror=()=>n(),a.onsuccess=()=>n()});function L(t){return t==null?void 0:t.trim().toLowerCase()}var $=`fs-${A}`,Se="list",Pe="nest-target",xe="slugs",Ie="collection",ke="empty",Le="cache",Ne={false:"false"},v={element:{key:`${$}-element`,values:{list:Se,nestTarget:Pe,slugs:xe}},collection:{key:`${$}-${Ie}`},empty:{key:`${$}-${ke}`},cacheItems:{key:`${$}-${Le}`,values:Ne}},[y,Re,qe]=O(v),Ce=({createCMSListInstances:t})=>{let e=new Map,r=t([y("collection")]);for(let n of r){let a=L(n.getAttribute(v.collection.key));if(!a)continue;let i=document.querySelector(`[${v.empty.key}^="${a}"]`);i&&(i.style.display="none"),n.wrapper.style.display="none",e.set(a,{listInstance:n,emptyElement:i})}return e},Me=t=>{let e=[...t.querySelectorAll(`${y("collection")}:not(a)`)].reduce((a,i)=>{let l=L(qe(i,"collection"));if(!l)return a;let s=a.get(l)||[];return s.push(i),a.set(l,s),a},new Map),r=new Map,n=new Map;for(let[a,i]of e){let l=i.find(u=>u.matches(y("element","nestTarget"))),s=i.find(u=>u.matches(y("element","slugs")));if(l&&s){let u=te(s.textContent);r.set(a,{slugs:u,nestTarget:l});continue}n.set(a,i[0])}return{manualNestTargets:r,externalNestTargets:n}},N=async(t,e,r,n)=>{let{manualNestTargets:a,externalNestTargets:i}=Me(t.element);await Promise.all([Ee(a,e,r,n),Te(i,t,e,r,n)])},Ee=(t,e,r,n)=>Promise.all([...t].map(([a,{nestTarget:i,slugs:l}])=>{let s=e.get(a);if(!s)return;let u=s.listInstance.items.filter(({href:o})=>{if(!o)return!1;try{let p=new URL(o),[c]=p.pathname.match(/[^/]+(?=\/$|$)/g)||[];return c&&l.includes(c)}catch{return!1}});return B(i,u,s,e,r,n)})),Te=async(t,e,r,n,a)=>{let{CMSList:i}=a;if(!t.size||!e.href)return;let l=await ge(e.href,{cache:n});if(!l)return;let s=ye([y("collection")],l),u=new Set;await Promise.all(s.map(async(o,p)=>{let c=new i(o,p),d=L(c.getAttribute(v.collection.key));if(!d||u.has(d))return;u.add(d);let m=r.get(d),h=t.get(d);if(!m||!h)return;let g=c.items.reduce((q,{href:K})=>{if(!K)return q;let z=m.listInstance.items.find(V=>V.href&&K===V.href);return z&&q.push(z),q},[]);await B(h,g,m,r,n,a)}))},B=async(t,e,{listInstance:r,emptyElement:n},a,i,l)=>{let{CMSItem:s}=l;if(!e.length&&!n)return;let u=t.parentElement;if(!u)return;let o=T(r.wrapper),p=x(o,"items");if(o.style.display="",e.length)await Promise.all([...p].map(c=>{if(!e.find(({element:m})=>m.isEqualNode(c))){c.remove();return}let d=new s(c,o);return N(d,a,i,l)}));else if(n){let c=x(o,"list");c==null||c.remove();let d=T(n);d.style.display="",o.appendChild(d)}u.insertBefore(o,t),t.remove()},_e=(t,e,r)=>{t.on("shouldnest",async n=>{await Promise.all(n.map(a=>N(a,e,t.cacheItems,r)))})},je=async(t,e)=>{let r=Ce(e);if(!r.size)return;_e(t,r,e),t.getAttribute(v.cacheItems.key)===v.cacheItems.values.false&&(t.cacheItems=!1);let n=[...t.items];await Promise.all(n.map(a=>N(a,r,t.cacheItems,e))),await t.emitSerial("nestinitialitems",n)},Oe=async()=>{let t=await ie();if(!t)return[];await X(J);let e=t.createCMSListInstances([y("element","list",{operator:"prefixed"})]);return await Promise.all(e.map(r=>je(r,t))),ne(A,e,()=>{for(let r of e)r.destroy()})};ue({init:Oe,version:fe,attributeKey:A})})();
