import{_ as ke}from"./assets/preload-helper.1c052cf7.js";(()=>{var $e=Object.create,M=Object.defineProperty,Se=Object.getOwnPropertyDescriptor,Ae=Object.getOwnPropertyNames,Ce=Object.getPrototypeOf,xe=Object.prototype.hasOwnProperty,Ee=(e,t,r)=>t in e?M(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Fe=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Ie=(e,t,r,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let l of Ae(t))!xe.call(e,l)&&l!==r&&M(e,l,{get:()=>t[l],enumerable:!(i=Se(t,l))||i.enumerable});return e},Te=(e,t,r)=>(r=e!=null?$e(Ce(e)):{},Ie(t||!e||!e.__esModule?M(r,"default",{value:e,enumerable:!0}):r,e)),De=(e,t,r)=>(Ee(e,typeof t!="symbol"?t+"":t,r),r),Pe=Fe((e,t)=>{t.exports=r;function r(i,l,a,s){var n,o,u;return function(){if(u=this,o=Array.prototype.slice.call(arguments),n&&(a||s))return;if(!a)return h(),n=setTimeout(c,l),n;n=setTimeout(h,l),i.apply(u,o);function c(){h(),i.apply(u,o)}function h(){clearTimeout(n),n=null}}}}),R="fs-attributes",Le="animation",Re="cmsattribute",Ke="cmscore",q="cmsfilter",Oe="queryparam",U="support",je=async(...e)=>{var t;let r=[];for(let i of e){let l=await((t=window.fsAttributes[i])==null?void 0:t.loading);r.push(l)}return r},K=class{static activateAlerts(){this.alertsActivated=!0}static alert(e,t){if(this.alertsActivated&&window.alert(e),t==="error")throw new Error(e)}};De(K,"alertsActivated",!1);var G=()=>{};function E(e,t,r,i){return e?(e.addEventListener(t,r,i),()=>e.removeEventListener(t,r,i)):G}var _e=e=>e instanceof Element,O=e=>e instanceof HTMLInputElement,Be=e=>e instanceof HTMLSelectElement,Me=e=>e instanceof HTMLTextAreaElement,J=e=>O(e)||Be(e)||Me(e),D=(e,t)=>!!e&&t.includes(e),qe=e=>e!=null,X=e=>typeof e=="string",j=e=>e===void 0,Ne={wrapper:"w-dyn-list",list:"w-dyn-items",item:"w-dyn-item",paginationWrapper:"w-pagination-wrapper",paginationNext:"w-pagination-next",paginationPrevious:"w-pagination-previous",pageCount:"w-page-count",emptyState:"w-dyn-empty"},_={formBlock:"w-form",checkboxField:"w-checkbox",checkboxInput:"w-checkbox-input",radioField:"w-radio",radioInput:"w-radio-input",checkboxOrRadioLabel:"w-form-label",checkboxOrRadioFocus:"w--redirected-focus",checkboxOrRadioChecked:"w--redirected-checked",successMessage:"w-form-done",errorMessage:"w-form-fail"},N=(e,t)=>(Array.isArray(t)||(t=[t]),t.map(r=>e.dispatchEvent(new Event(r,{bubbles:!0}))).every(r=>r)),{radioInput:He,checkboxOrRadioFocus:Ve,checkboxOrRadioChecked:We}=_,Qe=(e,t=[])=>{let{type:r}=e;if(O(e)&&["checkbox","radio"].includes(r)){if(!e.checked||(e.checked=!1,N(e,["click","input","change"].filter(a=>!t.includes(a))),r==="checkbox"))return;let{parentElement:i}=e;if(!i)return;let l=i.querySelector(`.${He}`);if(!l)return;l.classList.remove(Ve,We);return}e.value="",N(e,["input","change"].filter(i=>!t.includes(i)))},ze=(e,t=!0)=>e.cloneNode(t);function H(e,t,r,i=!0){let l=r?[r]:[];if(!e)return l;let a=e.split(",").reduce((s,n)=>{let o=n.trim();return(!i||o)&&s.push(o),s},[]);if(t){let s=a.filter(n=>D(n,t));return s.length?s:l}return a}var Ue=e=>Object.entries(e),Y=e=>!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length),Z=(e,t)=>e.every(r=>t.includes(r))&&t.every(r=>e.includes(r)),F=(e,t)=>{let{type:r}=e,i=r==="radio";if(i||r==="checkbox"){if(!O(e)||typeof t!="boolean"||t===e.checked||i&&t===!1)return;e.checked=t}else{if(e.value===t)return;e.value=t.toString()}N(e,["click","input","change"])};function Ge(e,t,r){var i;let l=window.fsAttributes[e];return l.destroy=r||G,(i=l.resolve)==null||i.call(l,t),t}var V=(e,t="1",r="iife")=>{let i=`${e}${r==="esm"?".esm":""}.js`;return`https://cdn.jsdelivr.net/npm/@finsweet/attributes-${e}@${t}/${i}`},Je=V(Le,"1","esm"),ee=async()=>{let{fsAttributes:e}=window;e.animation||(e.animation={});let{animation:t}=e;if(t.import)return t.import;try{return t.import=ke(()=>import(Je),[]),t.import}catch(r){K.alert(`${r}`,"error");return}},Xe=V(Ke,"1"),Ye=async()=>{let{fsAttributes:e}=window;e.cmscore||(e.cmscore={});let{cmscore:t}=e;if(t.import)return t.import;try{return t.import=ke(()=>import(Xe),[]),t.import.then(r=>{r&&(t.version||(t.version=r.version))}),t.import}catch(r){K.alert(`${r}`,"error");return}},Ze=`${R}-${U}`,et=async()=>{var e;let{fsAttributes:t,location:r}=window,{host:i,searchParams:l}=new URL(r.href);return!i.includes("webflow.io")||!l.has(Ze)?!1:(e=t.import)==null?void 0:e.call(t,U,"1")},C=e=>t=>`${e}${t?`-${t}`:""}`,te=e=>{let t=(i,l,a)=>{let s=e[i],{key:n,values:o}=s,u;if(!l)return`[${n}]`;let c=o==null?void 0:o[l];X(c)?u=c:u=c(a&&"instanceIndex"in a?a.instanceIndex:void 0);let h=a&&"caseInsensitive"in a&&a.caseInsensitive?"i":"";if(!(a!=null&&a.operator))return`[${n}="${u}"${h}]`;switch(a.operator){case"prefixed":return`[${n}^="${u}"${h}]`;case"suffixed":return`[${n}$="${u}"${h}]`;case"contains":return`[${n}*="${u}"${h}]`}};function r(i,l){let a=t("element",i,l),s=(l==null?void 0:l.scope)||document;return l!=null&&l.all?[...s.querySelectorAll(a)]:s.querySelector(a)}return[t,r,(i,l)=>{let a=e[l];return a?i.getAttribute(a.key):null}]},W={preventLoad:{key:`${R}-preventload`},debugMode:{key:`${R}-debug`},src:{key:"src",values:{finsweet:"@finsweet/attributes"}},dev:{key:`${R}-dev`}},[re,Gr]=te(W),tt=e=>{let{currentScript:t}=document,r={};if(!t)return{attributes:r,preventsLoad:!1};let i={preventsLoad:X(t.getAttribute(W.preventLoad.key)),attributes:r};for(let l in e){let a=t.getAttribute(e[l]);i.attributes[l]=a}return i},rt=({scriptAttributes:e,attributeKey:t,version:r,init:i})=>{var l;it(),(l=window.fsAttributes)[t]||(l[t]={});let{preventsLoad:a,attributes:s}=tt(e),n=window.fsAttributes[t];n.version=r,n.init=i,a||(window.Webflow||(window.Webflow=[]),window.Webflow.push(()=>i(s)))},it=()=>{let e=at();if(window.fsAttributes&&!Array.isArray(window.fsAttributes)){Q(window.fsAttributes,e);return}let t=lt(e);Q(t,e),st(t),window.fsAttributes=t,window.FsAttributes=window.fsAttributes,et()},lt=e=>{let t={cms:{},push(...r){var i,l;for(let[a,s]of r)(l=(i=this[a])==null?void 0:i.loading)==null||l.then(s)},async import(r,i){return t[r]||new Promise(a=>{let s=document.createElement("script");s.src=V(r,i),s.async=!0,s.onload=()=>{let[n]=Q(t,[r]);a(n)},document.head.append(s)})},destroy(){var r,i;for(let l of e)(i=(r=window.fsAttributes[l])==null?void 0:r.destroy)==null||i.call(r)}};return t},at=()=>{let e=re("src","finsweet",{operator:"contains"}),t=re("dev");return[...document.querySelectorAll(`script${e}, script${t}`)].reduce((r,i)=>{var l;let a=i.getAttribute(W.dev.key)||((l=i.src.match(/[\w-. ]+(?=(\.js)$)/))==null?void 0:l[0]);return a&&!r.includes(a)&&r.push(a),r},[])},Q=(e,t)=>t.map(r=>{let i=e[r];return i||(e[r]={},i=e[r],i.loading=new Promise(l=>{i.resolve=a=>{l(a),delete i.resolve}}),i)}),st=e=>{let t=Array.isArray(window.fsAttributes)?window.fsAttributes:[];e.push(...t)},nt="1.16.2",v=`fs-${q}`,ot="list",ut="filters",ct="empty",ht="initial",ft="results-count",dt="filter-results-count",mt="items-count",pt="tag-template",gt="tag-text",yt="tag-remove",vt="scroll-anchor",wt="clear",bt="reset",kt="field",$t="clear",St="reset",At="match",ie={any:"any",all:"all"},Ct="range",le={from:"from",to:"to"},xt="type",Et={date:"date"},Ft="showquery",It={true:"true"},Tt="allowsubmit",Dt={true:"true"},Pt="hideempty",Lt={true:"true"},Rt="highlight",Kt={true:"true"},Ot="highlightclass",jt="active",_t="debounce",Bt="tagformat",Mt={category:"category"},qt="tagcategory",Nt="easing",Ht="duration",I={element:{key:`${v}-element`,values:{list:C(ot),filters:C(ut),empty:C(ct),initial:C(ht),resultsCount:C(ft),filterResultsCount:C(dt),itemsCount:C(mt),tagTemplate:C(pt),tagText:C(gt),tagRemove:C(yt),scrollAnchor:C(vt),reset:wt,resetFallback:bt}},field:{key:`${v}-${kt}`},reset:{key:`${v}-${$t}`},resetFallback:{key:`${v}-${St}`},match:{key:`${v}-${At}`,values:ie},range:{key:`${v}-${Ct}`,values:le},type:{key:`${v}-${xt}`,values:Et},showQuery:{key:`${v}-${Ft}`,values:It},allowSubmit:{key:`${v}-${Tt}`,values:Dt},hideEmpty:{key:`${v}-${Pt}`,values:Lt},highlight:{key:`${v}-${Rt}`,values:Kt},highlightCSS:{key:`${v}-${Ot}`},activeCSS:{key:`${v}-${jt}`},debouncing:{key:`${v}-${_t}`},tagFormat:{key:`${v}-${Bt}`},tagCategory:{key:`${v}-${qt}`},easing:{key:`${v}-${Nt}`},duration:{key:`${v}-${Ht}`}},[B,S]=te(I),Vt=Object.values(ie),Wt={range:Object.values(le)},ae=Object.values(Mt),Qt="fs-cmsfilter_highlight",zt="fs-cmsfilter_active",Ut="50",se=({filtersData:e})=>{for(let{elements:t}of e)for(let r of t){let{resultsCount:i,hidden:l,hideEmpty:a}=r;if(!a)continue;let s=i===0;s!==l&&(r.hidden=s,a.style.display=s?"none":"")}},Gt=({props:e})=>{for(let t in e){let{elements:r,values:i,highlightData:l}=e[t];if(l)for(let a of i){let s=r.get(a);if(!s)continue;let{element:n,originalHTML:o}=s,u=l.get(a);if(!u){n.innerHTML=o;continue}let{filterValue:c,highlightCSSClass:h}=u,f=new RegExp(c||a,"gi");n.innerHTML=o.replace(f,`<span class="${h}">$&</span>`)}}},Jt=({props:e})=>{for(let t in e)e[t].highlightData=new Map},ne=({resultsElement:e},{validItems:t})=>{e&&(e.textContent=`${t.length}`)},oe=({filtersData:e})=>{for(let{elements:t}of e)for(let{resultsElement:r,resultsCount:i}of t)r&&(r.textContent=`${i}`)},ue=({filtersData:e},{validItems:t})=>{var r,i;let l={};for(let{elements:a,filterKeys:s}of e){if(s.length>1)continue;let[n]=s;l[n]||(l[n]={});for(let o of a)o.resultsCount=0,(r=l[n])[i=o.value]||(r[i]=[]),l[n][o.value].push(o)}for(let{props:a}of t)for(let s in a){let n=l[s];if(!n)continue;let{values:o}=a[s];for(let u of o){let c=n[u];if(c)for(let h of c)h.resultsCount+=1}}},{field:{key:ce},range:{key:he},type:{key:fe}}=I,Xt=(e,t)=>{let{highlightResults:r,showFilterResults:i,hideEmptyFilters:l}=e;t.on("shouldcollectprops",a=>{for(let s of a)s.collectProps({fieldKey:ce,rangeKey:he,typeKey:fe})}),t.on("shouldfilter",async()=>await e.applyFilters(!0)),t.on("renderitems",a=>{if(ne(e,t),ue(e,t),l&&se(e),i&&oe(e),r)for(let s of a)Gt(s)}),t.once("nestinitialitems").then(async a=>{for(let s of a)s.collectProps({fieldKey:ce,rangeKey:he,typeKey:fe});await e.applyFilters(!0),await t.renderItems(!0)})},de=Te(Pe(),1),me=({elements:e,values:t},r)=>{let i;r?(t.delete(r),i=e.filter(l=>l.value===r)):(t.clear(),i=e);for(let{element:l}of i)Qe(l)},Yt="fs-cms-element",Zt={wrapper:"wrapper",list:"list",item:"item",paginationWrapper:"pagination-wrapper",paginationNext:"pagination-next",paginationPrevious:"pagination-previous",pageCount:"page-count",emptyState:"empty"},er=e=>{let t=`.${Ne[e]}`,r=`[${Yt}="${Zt[e]}"]`;return`:is(${t}, ${r})`},tr=Intl.DateTimeFormat(),pe=e=>{if(e)return new Date(tr.format(new Date(e)))},rr=e=>{if(e)return parseFloat(e.replace(/[^0-9.-]+/g,""))};function z(e){return e==null?void 0:e.trim().toLowerCase()}var ge=(e,t)=>{e.closest(er("item"))&&(e.id=`${e.id}-${t}`)},T=(e,t,r)=>{var i,l;let{value:a}=e,{elements:s,values:n,mode:o}=t,{value:u,mode:c,type:h,activeCSSClass:f}=r;switch(h){case"checkbox":{let{checked:g}=e;if(!u)break;(i=e.parentElement)==null||i.classList[g?"add":"remove"](f),n[g?"add":"delete"](u);break}case"radio":{let{checked:g}=e;for(let{element:d,type:p}of s){if(p!=="radio")return!1;let m=d.checked;(l=d.parentElement)==null||l.classList[m?"add":"remove"](f)}if(!g||!u)break;n.clear(),n.add(u);break}default:{if(r.value=a,e.classList[a?"add":"remove"](f),o==="range"){let g=[...n];g[c==="from"?0:1]=a,g.some(d=>!!d)?t.values=new Set(g):n.clear();break}n.clear(),a&&n.add(a);break}}return!0},{field:{key:ir},reset:{key:lr},resetFallback:{key:ar},range:{key:sr},match:{key:nr},tagFormat:{key:or},tagCategory:{key:ur},hideEmpty:{key:cr,values:hr},highlight:{key:fr,values:dr},highlightCSS:{key:mr},activeCSS:{key:pr},debouncing:{key:gr}}=I,{checkboxField:yr,radioField:vr}=_,wr=e=>{let t=e.querySelector("form"),r=e.querySelector('input[type="submit"]'),i=[...S("reset",{scope:e,operator:"prefixed",all:!0}),...S("resetFallback",{scope:e,operator:"prefixed",all:!0})],l=new Map;for(let a of i){let s=a.getAttribute(lr)||a.getAttribute(ar),n=s?[...new Set(H(s))].map(o=>z(o)):[];l.set(a,n)}return{form:t,submitButton:r,resetButtonsData:l}},br=(e,t,r,i,l)=>{let a=[];return e.querySelectorAll(B("field")).forEach((s,n)=>{let o=s.getAttribute(ir);if(!o)return;let u=[...new Set(H(o))],c=u.map(y=>z(y));if(!c.length)return;let h=kr(s,u,c,t,r,i,l);if(!h)return;let[f,g]=h,d=a.find(y=>Z(c,y.filterKeys)),p=d||{...f,elements:[]};d||a.push(p);let m=s.closest(`.${yr}, .${vr}`);if(m){let y=O(s),k=y?"true":s.textContent||"",b=y?s:m.querySelector("input");ge(b,n);let x=S("filterResultsCount",{operator:"prefixed",scope:m}),P=s.getAttribute(cr)===hr.true?m:void 0,L={...g,value:k,resultsElement:x,hideEmpty:P,element:b,type:b.type};p.elements.push(L),T(b,p,L);return}if(!J(s)||s.type==="submit")return;let{type:w,value:A}=s;ge(s,n);let $={...g,element:s,type:w,value:A};p.elements.push($),w==="select-one"&&T(s,p,$)}),a},kr=(e,t,r,i,l,a,s)=>{let[n,o,u,c,h,f]=[nr,or,pr,gr,fr,mr].map(x=>e.getAttribute(x)),g=D(n,Vt)?n:void 0,d=D(o,ae)?o:void 0,p=e.getAttribute(ur),m=u||i,w=c?parseFloat(c):l,A=a||h===dr.true,$=f||s,y=e.getAttribute(sr),k,b;for(let[x,P]of Ue(Wt))if(D(y,P)){k=x,b=y;break}return[{match:g,filterKeys:r,originalFilterKeys:t,highlight:A,tagFormat:d,tagCategory:p,highlightCSSClass:$,mode:k,values:new Set},{activeCSSClass:m,debouncing:w,resultsCount:0,mode:b,hidden:!1}]},$r=(e,t,r,i)=>(i&&Jt(e),r?!0:t.every(l=>Sr(e,l))),Sr=(e,{filterKeys:t,values:r,match:i,mode:l,highlight:a,highlightCSSClass:s,elements:n})=>{let o=[...r];if(!o.length)return!0;let u=t.includes("*");u&&(t=Object.keys(e.props));let c=t.filter(h=>{let f=e.props[h];if(!f)return!1;let{values:g,highlightData:d,type:p,range:m}=f,w=[...g];if(!w.length)return!1;if(l==="range"){let[$]=w,[y,k]=o,b=ye($,y,k,p);return b&&a&&(d==null||d.set($,{highlightCSSClass:s})),b}let A=o.filter($=>{if(m==="from"||m==="to"){let[y,k]=w,b=ye($,y,k,p);return b&&a&&(d==null||d.set(y,{highlightCSSClass:s}),d==null||d.set(k,{highlightCSSClass:s})),b}return w.some(y=>{let k;if(p==="date"&&!u){let[b,x]=[$,y].map(P=>{var L;return(L=pe(P))==null?void 0:L.getTime()});k=b===x}else n.some(({type:b})=>!["checkbox","radio","select-one"].includes(b))||t.length>1?k=y.toLowerCase().includes($.toLowerCase()):k=$.toLowerCase()===y.toLowerCase();return k&&a&&(d==null||d.set(y,{highlightCSSClass:s,filterValue:$})),k})});return i==="all"?A.length===o.length:A.length>0});return i==="all"?c.length===t.length:c.length>0},ye=(e,t,r,i)=>{let[l,a,s]=[e,t,r].map(n=>i==="date"?pe(n):rr(n));return l?!t&&!j(s)?l<=s:!r&&!j(a)?l>=a:j(s)||j(a)?!1:l>=a&&l<=s:!1},{location:ve,history:Ar}=window,Cr=e=>{let t=!1,{filtersData:r}=e,i=new URL(ve.href),{searchParams:l}=i;for(let a of l){let s=z(a[0]),n=a[1],o=r.find(({filterKeys:f})=>f.length===1&&f.includes(s));if(!o)continue;let u=H(n,void 0,void 0,!1);if(!u.length)continue;t=!0;let{elements:c,mode:h}=o;if(h==="range"){let[f,g]=u,d=c.filter(({mode:m})=>m==="from"),p=c.filter(({mode:m})=>m==="to");if(f&&d.length)for(let m of d){let{element:w,type:A}=m;A==="checkbox"||A==="radio"?F(w,!0):F(w,f),T(w,o,m)}if(g&&p)for(let m of p){let{element:w,type:A}=m;A==="checkbox"||A==="radio"?F(w,!0):F(w,g),T(w,o,m)}continue}for(let f of u)for(let g of c){let{element:d,value:p,type:m}=g;if(p===f&&(m==="checkbox"||m==="radio"))F(d,!0);else if(!p&&m!=="checkbox"&&m!=="radio")F(d,f);else continue;T(d,o,g)}}return t},xr=e=>{let t=new URL(ve.href),{searchParams:r}=t;for(let{filterKeys:[i],values:l}of e){if(!l.size){r.delete(i);continue}let a=[...l].join(",");r.set(i,a)}Ar.replaceState(null,"",t.toString())},{field:{key:Er},range:{key:Fr},type:{key:Ir}}=I,Tr=class{constructor(e,t,{resultsElement:r,showQueryParams:i,allowSubmit:l,highlightAll:a,highlightCSSClass:s,activeCSSClass:n,debouncing:o}){this.formBlock=e,this.listInstance=t,this.restartingFilters=!1;let{form:u,submitButton:c,resetButtonsData:h}=wr(e);this.form=u,this.submitButton=c,this.resetButtonsData=h,this.resultsElement=r,this.showQueryParams=i,this.allowSubmit=l,this.activeCSSClass=n,this.debouncing=o,this.highlightAll=a,this.highlightCSSClass=s,this.submitButtonVisible=!!c&&Y(c);let f=this.init();this.destroy=async()=>{(await f)()}}async init(){let{listInstance:e,hideEmptyFilters:t,showFilterResults:r}=this;this.storeFiltersData();for(let i of e.items)i.collectProps({fieldKey:Er,rangeKey:Fr,typeKey:Ir});return ne(this,e),ue(this,e),t&&se(this),r&&oe(this),Cr(this),await ee(),this.applyFilters(),this.listenEvents()}async listenEvents(){let{form:e,resetButtonsData:t,submitButton:r}=this,i=E(e,"submit",n=>this.handleSubmit(n)),l=E(e,"input",n=>this.handleInputEvents(n)),a=[];for(let[n,o]of t){let u=E(n,"click",()=>this.resetFilters(o));a.push(u);let c=n.closest(`.${_.radioField}`);if(!c)continue;let h=c.querySelector("input");if(!h)continue;let f=E(h,"input",()=>{h.checked&&this.resetFilters(o)});a.push(f)}let s;return r&&(s=E(window,"resize",(0,de.default)(()=>{this.submitButtonVisible=Y(r)},50))),()=>{i(),l(),s==null||s();for(let n of a)n()}}async handleInputEvents({target:e}){let{submitButtonVisible:t,filtersData:r,restartingFilters:i}=this;if(!J(e))return;let l,a=r.find(({elements:n})=>(l=n.find(o=>o.element===e),l));if(!a||!l||!T(e,a,l)||i||t)return;let{debouncing:s}=l;this.debouncedApplyFilters||(this.debouncedApplyFilters=(0,de.default)(this.applyFilters,s)),await this.debouncedApplyFilters()}async handleSubmit(e){this.allowSubmit||(e.preventDefault(),e.stopImmediatePropagation()),await this.applyFilters()}async toggleFiltersState(e){let{listInstance:t,filtersActive:r}=this,i=!e;r!==i&&(this.filtersActive=i,t.initialElement&&(await t.displayElement(i?"initialElement":"wrapper",!1,!1),await t.displayElement(i?"wrapper":"initialElement",!0,r!==void 0)))}async applyFilters(e,t=!0){this.debouncedApplyFilters=void 0;let{listInstance:r,filtersData:i,filtersActive:l,highlightResults:a,tagsInstance:s,showQueryParams:n}=this,{items:o,initialElement:u}=r,c=i.every(({values:h})=>!h.size);if(c&&!l){await this.toggleFiltersState(c);return}for(let h of o)h.valid=$r(h,i,c,a);e||(await r.switchPage(1,!1),r.scrollToAnchor(),n&&xr(i),await Promise.all([(async()=>{c?(await this.toggleFiltersState(c),await r.renderItems(!1,!u)):(await r.renderItems(!1,!u),await this.toggleFiltersState(c))})(),(async()=>{t&&await(s==null?void 0:s.syncTags())})()]))}async resetFilters(e,t){this.restartingFilters=!0;let{filtersData:r}=this;if(!e||!e.length)for(let l of r)me(l);else{let l=r.find(a=>Z(a.filterKeys,e));if(!l)return;me(l,t)}let i=!t;await this.applyFilters(!1,i),this.restartingFilters=!1}async addTagsInstance(e){this.tagsInstance=e,await e.syncTags()}storeFiltersData(){let{form:e,activeCSSClass:t,debouncing:r,highlightAll:i,highlightCSSClass:l}=this,a=br(e,t,r,i,l);return this.filtersData=a,this.showFilterResults=a.some(({elements:s})=>s.some(({resultsElement:n})=>n)),this.hideEmptyFilters=a.some(({elements:s})=>s.some(({hideEmpty:n})=>n)),this.highlightResults=a.some(({highlight:s})=>s),a}},we=({values:e,textNode:t,filterData:{originalFilterKeys:r,mode:i,tagFormat:l,tagCategory:a}},s)=>{let n=a||r.join(", "),o;i==="range"?o=`[${e.map(c=>c||"--").join(", ")}]`:[o]=e;let u;o==="true"?u=n:(l||s)==="category"?u=`${n}: ${o}`:u=o,t.textContent=u},Dr=e=>!!S("tagRemove",{operator:"prefixed",scope:e}),Pr=class{constructor(e,t,r,i){this.template=e,this.filtersInstance=t,this.listInstance=r,this.globalTagsFormat=i,this.tagsData=[],this.hasRemoveTrigger=!1,this.wrapper=e.parentElement||K.alert("The tags have no parent wrapper.","error"),this.destroy=this.init()}init(){let{template:e,wrapper:t}=this;e.remove(),this.hasRemoveTrigger=Dr(e);let r=E(t,"click",i=>this.handleClick(i));return()=>r()}handleClick(e){let{target:t}=e;if(!_e(t))return;let{hasRemoveTrigger:r,tagsData:i,listInstance:l}=this,a=t.closest(B("element","tagTemplate",{instanceIndex:l.getInstanceIndex(I.element.key)}));if(!a)return;let s=t.closest(B("element","tagRemove",{operator:"prefixed"}));if(r&&!s)return;let n=i.find(({element:o})=>o===a);n&&this.removeTag(n,!0)}async addTag(e,t){let{wrapper:r,template:i,tagsData:l,globalTagsFormat:a,listInstance:{listAnimation:s}}=this,n=ze(i),o=S("tagText",{operator:"prefixed",scope:n})||n,u={element:n,values:t,textNode:o,filterData:e};if(we(u,a),l.push(u),s){let{animateIn:c,options:h}=s;await c(n,{target:r,...h})}else n.style.opacity="1",r.appendChild(n)}async updateTag(e,t){let{globalTagsFormat:r}=this;e.values=t,we(e,r)}async removeTag(e,t){let{element:r,values:i,filterData:{filterKeys:l}}=e,{tagsData:a,filtersInstance:s,listInstance:{listAnimation:n}}=this;this.tagsData=a.filter(o=>o!==e),await Promise.all([Promise.all(i.map(async o=>{if(t)return s.resetFilters(l,o)})),(async()=>{if(n){let{animateOut:o,options:u}=n;await o(r,{remove:!0,...u})}else r.remove()})()])}async syncTags(){let{tagsData:e,filtersInstance:{filtersData:t}}=this;await Promise.all(t.map(r=>{let{values:i,mode:l}=r,a=[...i],s=e.filter(u=>u.filterData===r);if(s.length===1&&(a.length===1||l==="range"&&a.length)){let[u]=s;this.updateTag(u,a);return}let n=[...a].filter(u=>!s.some(({values:c})=>c.includes(u))),o=s.filter(({values:u})=>u.every(c=>!a.includes(c)));return Promise.all([(async()=>l==="range"&&n.length?this.addTag(r,n):Promise.all(n.map(u=>this.addTag(r,[u]))))(),Promise.all(o.map(u=>this.removeTag(u)))])}))}},{element:{key:be},duration:{key:Lr},easing:{key:Rr},showQuery:{key:Kr,values:Or},allowSubmit:{key:jr,values:_r},tagFormat:{key:Br},highlight:{key:Mr,values:qr},highlightCSS:{key:Nr},activeCSS:{key:Hr},debouncing:{key:Vr}}=I,Wr=(e,t)=>{let r=e.getInstanceIndex(be),i=S("filters",{instanceIndex:r});if(!i)return;let l=i.closest(`.${_.formBlock}`);if(!l)return;let a=S("empty",{instanceIndex:r});a&&e.addEmptyElement(a);let s=S("initial",{instanceIndex:r});if(s&&(e.initialElement=s),!e.scrollAnchor){let p=S("scrollAnchor",{instanceIndex:r});p&&(e.scrollAnchor=p)}if(!e.itemsCount){let p=S("itemsCount",{instanceIndex:r});p&&e.addItemsCount(p)}let n=S("resultsCount",{instanceIndex:r}),o=e.getAttribute(Kr)===Or.true,u=e.getAttribute(jr)===_r.true,c=e.getAttribute(Mr)===qr.true,h=e.getAttribute(Nr)||Qt,f=e.getAttribute(Hr)||zt,g=parseFloat(e.getAttribute(Vr)||Ut),d=new Tr(l,e,{resultsElement:n,showQueryParams:o,allowSubmit:u,highlightAll:c,highlightCSSClass:h,activeCSSClass:f,debouncing:g});return t.addListAnimation(e,{durationKey:Lr,easingKey:Rr}),d},Qr=async(e,t)=>{let r=e.getInstanceIndex(be),i=S("tagTemplate",{instanceIndex:r});if(!i)return;let l=e.getAttribute(Br),a=D(l,ae)?l:void 0,s=new Pr(i,t,e,a);return await t.addTagsInstance(s),s},zr=async()=>{let e=await Ye();if(!e)return[];await je(Re,Oe);let t=e.createCMSListInstances([B("element","list",{operator:"prefixed"})]),r=(await Promise.all(t.map(l=>Ur(l,e)))).filter(qe),i=r.map(({filtersInstance:l})=>l);return Ge(q,i,()=>{var l;for(let a of t)(l=a.destroy)==null||l.call(a);for(let{cleanup:a}of r)a()})},Ur=async(e,t)=>{let r=Wr(e,t);if(!r)return;Xt(r,e);let i=await Qr(e,r);return{filtersInstance:r,cleanup:()=>{r.destroy(),i==null||i.destroy()}}};rt({init:zr,version:nt,attributeKey:q}),ee()})();
